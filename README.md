# MoviePilot 插件库

ikirito 的 MoviePilot V2 插件仓库

## 安装方法

在 MoviePilot 的「设置」-「插件」-「安装插件」中添加本仓库地址：

```
https://github.com/i-kirito/MoviePilot-Plugins
```

## 插件列表

### TransferCleaner - 转移记录清理

监控目录文件变化，自动删除对应的转移历史记录。适用于网盘上传整理场景。

#### 功能特性

- **实时监控**：监控指定目录的文件删除/移动事件，自动清理对应转移记录
- **路径映射**：支持本地路径到存储路径的映射（如 115 网盘、阿里云盘等）
- **立即运行**：一次性扫描清理源文件已不存在的旧记录
- **检测未上传**：检测已有转移记录但源文件仍存在的情况，删除旧记录并重新整理
- **定时任务**：支持 cron 表达式定时执行检测未上传任务
- **清理假失败**：清理失败记录中源文件已不存在的（实际已上传成功）
- **延迟删除**：可配置延迟时间，避免误删
- **模拟运行**：Dry Run 模式，预览将要删除的记录
- **兼容模式**：支持网络挂载目录的轮询监控

#### 版本历史

| 版本 | 更新内容 |
|------|----------|
| v1.6 | 检测未上传文件功能支持定时任务执行 |
| v1.5.1 | 修复保存配置时页面不关闭的问题 |
| v1.5 | 新增清理假失败记录功能 |
| v1.4 | 新增检测未上传文件并重新整理功能 |
| v1.3 | 新增立即运行功能 |
| v1.2 | 新增路径映射功能 |
| v1.1 | 新增延迟删除、不删除目录配置 |
| v1.0 | 初始版本 |

## 目录结构

```
mp-plugin/
├── icons/                 # 插件图标
│   └── transfercleaner.png
├── plugins.v2/            # V2 插件代码
│   └── transfercleaner/
│       └── __init__.py
├── package.v2.json        # V2 插件仓库元数据
├── LICENSE
└── README.md
```

## 开发说明

插件基于 MoviePilot V2 插件框架开发，需要 MoviePilot V2 版本。

## License

MIT
